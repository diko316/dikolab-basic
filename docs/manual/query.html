<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Manual | @dikotech/basic</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Basic Javascript helpers"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="@dikotech/basic"><meta property="twitter:description" content="Basic Javascript helpers"></head>
<body class="layout-container manual-root" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/diko316/dikotech-basic"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/README.html"><a href="manual/README.html" data-ice="link">@dikotech/basic</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/query.html"><a href="manual/query.html" data-ice="link">JSON Query</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/query.html"><a href="manual/query.html#usage" data-ice="link">Usage</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#acquire--code-query--code--function-from--dikotech-basic" data-ice="link">Acquire query function from @dikotech/basic</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#-code-get--code--query" data-ice="link">get query</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#data-json-file-sample-data" data-ice="link">data.json file sample data</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#simple-extract-value" data-ice="link">Simple extract value</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#compose-object" data-ice="link">Compose Object</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#list-filter" data-ice="link">List Filter</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#substitution" data-ice="link">Substitution</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#custom-function-call" data-ice="link">Custom Function call</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#-code-set--code--query" data-ice="link">set query</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#data-json-file-sample-data" data-ice="link">data.json file sample data</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#simple-set" data-ice="link">Simple set</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#multiple-set" data-ice="link">Multiple set</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#transform-set" data-ice="link">Transform set</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#-code-unset--code--query" data-ice="link">unset query</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#data-json-file-sample-data" data-ice="link">data.json file sample data</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#simple-remove-array-items" data-ice="link">Simple remove array items</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#remove-guard" data-ice="link">Remove Guard</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#remove-guard-operator-with-multiple-value-match" data-ice="link">Remove Guard operator with multiple value match</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#remove-guard-operator-with-substitution" data-ice="link">Remove Guard operator with substitution</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#remove-guard-operator-with-multiple-value-substitution" data-ice="link">Remove Guard operator with multiple value substitution</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/query.html"><a href="manual/query.html#query-language" data-ice="link">Query Language</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#get-lexical-structure" data-ice="link">get Lexical Structure</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#set-lexical-structure" data-ice="link">set Lexical Structure</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#unset-lexical-structure" data-ice="link">unset Lexical Structure</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#expression-lexical-rule" data-ice="link">expression Lexical Rule</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#object-property-access-expression" data-ice="link">Object property access expression</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#array-item-access-expression" data-ice="link">Array item access expression</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#filter-conditions" data-ice="link">Filter conditions</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#filter-function-call" data-ice="link">Filter function call</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown" data-ice="content"><h1 id="json-query">JSON Query</h1><h2 id="usage">Usage</h2><h3 id="acquire--code-query--code--function-from--dikotech-basic">Acquire <code>query</code> function from @dikotech/basic</h3><p>CommonJS</p>
<pre><code class="lang-js"><code class="source-code prettyprint">const query = require(&quot;@dikotech/basic&quot;).query;</code>
</code></pre>
<p>ECMAScript module</p>
<pre><code class="lang-js"><code class="source-code prettyprint">import { query } from &quot;@dikotech/basic&quot;;</code>
</code></pre>
<h3 id="-code-get--code--query"><code>get</code> query</h3><h4 id="data-json-file-sample-data">data.json file sample data</h4><pre><code class="lang-json"><code class="source-code prettyprint">{
  &quot;message&quot;: &quot;Ok&quot;,
  &quot;data&quot;: [
    {
      &quot;id&quot;: 1,
      &quot;name&quot;: &quot;name1&quot;,
      &quot;language&quot;: [
        &quot;en&quot;,
        &quot;fr&quot;,
        1,
        &quot;de&quot;
      ]
    },
    {
      &quot;id&quot;: 2,
      &quot;name&quot;: &quot;name2&quot;
    }
  ]
}</code>
</code></pre>
<h4 id="simple-extract-value">Simple extract value</h4><pre><code class="lang-js"><code class="source-code prettyprint">const object = require(&quot;data.json&quot;);

// returns 1
query(
  object,
  &quot;get data[0].id&quot;
);</code>
</code></pre>
<h4 id="compose-object">Compose Object</h4><pre><code class="lang-js"><code class="source-code prettyprint">// returns { &quot;found&quot;: 1 }
query(
  object,
`get
  data[0].id as found,
  data[1].name as nextName
`
);</code>
</code></pre>
<h4 id="list-filter">List Filter</h4><pre><code class="lang-js"><code class="source-code prettyprint">// returns [ &quot;en&quot;, &quot;fr&quot;, &quot;de&quot; ]
query(
  object,
  &quot;get data[]:[name=name1].language[]:[!=1]&quot;
);</code>
</code></pre>
<h4 id="substitution">Substitution</h4><pre><code class="lang-js"><code class="source-code prettyprint">// returns [ &quot;en&quot;, &quot;fr&quot;, &quot;de&quot; ]
query(
  object,
  &quot;get data[]:[name=?].language[]:[!=?]&quot;,
  [
    &quot;name1&quot;,
    1
  ]
);</code>
</code></pre>
<h4 id="custom-function-call">Custom Function call</h4><pre><code class="lang-js"><code class="source-code prettyprint">// returns [ &quot;en&quot;, &quot;fr&quot;, &quot;de&quot; ]
query(
  object,
  &quot;get data[]:[name=?].language[]:customFilter()&quot;,
  {
    values: [
      &quot;name1&quot;
    ],
    /**
     *
     * @param {*} value currently selected item.
     *            may also be an item iterated from an array collection or
     *            property iterated from object.
     * @param {string|number|null} key zero based index position if array collection.
     *            or, property name of parent object.
     *            or, null if parent object is not an array or object.
     * @param {*} parent current parent object selected.
     *            It may contain array, object, or null.
     * @param {...*} otherArguments other arguments passed from query expression.
     *            otherArguments[0] may contain &quot;test&quot; value if called in query: `:customFilter(test)`
     * @returns {boolean|*} return false to exclude from selection
     */
    customFilter(value, key, parent, ...otherArguments) {
      return typeof value === &apos;string&apos;;
    }
  }
);</code>
</code></pre>
<h3 id="-code-set--code--query"><code>set</code> query</h3><h4 id="data-json-file-sample-data">data.json file sample data</h4><pre><code class="lang-json"><code class="source-code prettyprint">{
  &quot;message&quot;: &quot;Ok&quot;,
  &quot;data&quot;: [
    {
      &quot;id&quot;: 1,
      &quot;name&quot;: &quot;name1&quot;,
      &quot;language&quot;: [
        &quot;en&quot;,
        &quot;fr&quot;
      ]
    },
    {
      &quot;id&quot;: 2,
      &quot;name&quot;: &quot;name2&quot;
    }
  ]
}</code>
</code></pre>
<h4 id="simple-set">Simple set</h4><pre><code class="lang-js"><code class="source-code prettyprint">// data[0] will now contain { id: 42, name: &quot;name1&quot;, language: [&quot;en&quot;, &quot;fr&quot;]}
query(
  object,
  &quot;set data[0].id is 42&quot;
);</code>
</code></pre>
<h4 id="multiple-set">Multiple set</h4><pre><code class="lang-js"><code class="source-code prettyprint">// data[0] will now contain { id: 42, name: &quot;name1&quot;, language: [&quot;en&quot;, &quot;fr&quot;]}
// data[1] will now contain { id: 2, name: &quot;updated name&quot;, language: [&quot;en&quot;]}
query(
  object,
`
set
  data[0].id is ?,
  data[1].name is ?,
  data[1].language[] is ?
  `,
  [
    42,
    &quot;updated name&quot;,
    &quot;en&quot;
  ]
);</code>
</code></pre>
<h4 id="transform-set">Transform set</h4><pre><code class="lang-js"><code class="source-code prettyprint">// data[0] will now contain { id: 42, name: &quot;name1&quot;, language: [&quot;en&quot;, &quot;fr&quot;]}
// data[1] will now contain { id: 2, name: &quot;updated name&quot;}
query(
  object,
`
set
  data[0].id is ?,
  data[1].name is :customizeValue(?)
  `,
  {
    values: [
      42,
      &quot;updated name&quot;
    ],
    /**
     *
     * @param {*} value currently selected item.
     *            may also be an item iterated from an array collection or
     *            property iterated from object.
     * @param {string|number|null} key zero based index position if array collection.
     *            or, property name of parent object.
     *            or, null if parent object is not an array or object.
     * @param {*} parent current parent object selected.
     *            It may contain array, object, or null.
     * @param {...*} otherArguments other arguments passed from query expression.
     *            otherArguments[0] may contain &quot;test&quot; value if called in query: `:customFilter(test)`
     * @returns {undefined|*} return transformed value.
     *            when used in &quot;set&quot; assignment query, returning undefined will:
     *              remove item from parent array or object.
     *              will do nothing if key, and parent is not array or object
     */
    customizeValue(value, key, parent, ...otherArguments) {
      if (value === &quot;name2&quot;) {
        return otherArguments[0];
      }

      return value;
    }
  }
);</code>
</code></pre>
<h3 id="-code-unset--code--query"><code>unset</code> query</h3><h4 id="data-json-file-sample-data">data.json file sample data</h4><pre><code class="lang-json"><code class="source-code prettyprint">{
  &quot;message&quot;: &quot;Ok&quot;,
  &quot;data&quot;: [
    {
      &quot;id&quot;: 1,
      &quot;name&quot;: &quot;name1&quot;,
      &quot;language&quot;: [
        &quot;en&quot;,
        &quot;fr&quot;
      ]
    },
    {
      &quot;id&quot;: 2,
      &quot;name&quot;: &quot;name2&quot;
    }
  ]
}</code>
</code></pre>
<h4 id="simple-remove-array-items">Simple remove array items</h4><pre><code class="lang-js"><code class="source-code prettyprint">// data[1] will be removed as 2 up to 10 do not exist.
query(
  object,
  &apos;unset data[1..10]&apos;
);</code>
</code></pre>
<h4 id="remove-guard">Remove Guard</h4><p>Guard operator <code>only [expression] is [values]</code>.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// removes data[0] since it has name property containing &quot;name1&quot; value.
query(
  object,
  &apos;unset data[] only name is [name1]&apos;
);</code>
</code></pre>
<h4 id="remove-guard-operator-with-multiple-value-match">Remove Guard operator with multiple value match</h4><pre><code class="lang-js"><code class="source-code prettyprint">// removes data[0] since it has language property array containing &quot;en&quot;, or &quot;fr&quot; value.
query(
  object,
  &apos;unset data[] only language[] is [en, fr, 1]&apos;
);</code>
</code></pre>
<h4 id="remove-guard-operator-with-substitution">Remove Guard operator with substitution</h4><pre><code class="lang-js"><code class="source-code prettyprint">// removes data[0] since it has language property array containing &quot;en&quot;, or &quot;fr&quot; value.
query(
  object,
  &apos;unset data[] only language[] is [?, ?, ?]&apos;,
  [
    &quot;en&quot;,
    &quot;fr&quot;,
    1
  ]
);</code>
</code></pre>
<h4 id="remove-guard-operator-with-multiple-value-substitution">Remove Guard operator with multiple value substitution</h4><pre><code class="lang-js"><code class="source-code prettyprint">query(
  object,
  &apos;unset data[] only language[] is ?&apos;,
  [
    [&quot;en&quot;, &quot;fr&quot;, 1]
  ]
);</code>
</code></pre>
<h2 id="query-language">Query Language</h2><p>Supported Lexical Structures.</p>
<h3 id="get-lexical-structure">get Lexical Structure</h3><pre><code><code class="source-code prettyprint">get `expression` [as `identifier`]
    ...
    , `expression` [as `identifier`]</code>
</code></pre><h3 id="set-lexical-structure">set Lexical Structure</h3><pre><code><code class="source-code prettyprint">set `expression` is `value`
  ...
  , `expression` is `value`</code>
</code></pre><h3 id="unset-lexical-structure">unset Lexical Structure</h3><pre><code><code class="source-code prettyprint">unset `expression` [only `expression` as `values`]
    ...
    , `expresson` [only `expression` as `values`]</code>
</code></pre><h3 id="expression-lexical-rule">expression Lexical Rule</h3><h4 id="object-property-access-expression">Object property access expression</h4><pre><code><code class="source-code prettyprint">objectAccess:

  [`propertyName`]

  .`propertyName`</code>
</code></pre><pre><code><code class="source-code prettyprint">expression:

  `property`

  `property` ... `objectAccess`
</code>
</code></pre><h4 id="array-item-access-expression">Array item access expression</h4><pre><code><code class="source-code prettyprint">indexRange:

  `number`

  `number`-`number`
</code>
</code></pre><pre><code><code class="source-code prettyprint">expression:

  [`indexRange`]

  [`indexRange` ...,`indexRange`]
</code>
</code></pre><h4 id="filter-conditions">Filter conditions</h4><pre><code><code class="source-code prettyprint">accessExpression:

  `property`

  `numeric_index`
</code>
</code></pre><pre><code><code class="source-code prettyprint">valueExpression:

  `string`

  `number`

  `regex`
</code>
</code></pre><pre><code><code class="source-code prettyprint">operator:

  `=`

  `!=`

  `~=`

  `&gt;`

  `&gt;=`

  `&lt;`

  `&gt;=`
</code>
</code></pre><pre><code><code class="source-code prettyprint">expression:

  :[`operator` `valueExpression`]

  :[`operator` `valueExpression` ... ,`valueExpression`]

  :[`accessExpression` `operator` `valueExpression`]

  :[`accessExpression` `operator` `valueExpression` ... ,`valueExpression`]
</code>
</code></pre><h4 id="filter-function-call">Filter function call</h4><pre><code><code class="source-code prettyprint">arguments:

  `string`

  `number`

  `object`

  `array`
</code>
</code></pre><pre><code><code class="source-code prettyprint">expression:

  :`functionName`()

  :`functionName`(`arguments`)

  :`functionName`(`arguments` ..., `arguments`)
</code>
</code></pre></div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
