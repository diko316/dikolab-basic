<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Manual | @dikotech/basic</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Basic Javascript helpers"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="@dikotech/basic"><meta property="twitter:description" content="Basic Javascript helpers"></head>
<body class="layout-container manual-root manual-index" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/diko316/dikotech-basic"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/README.html"><a href="manual/README.html" data-ice="link">@dikotech/basic</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/query.html"><a href="manual/query.html" data-ice="link">JSON Query</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/query.html"><a href="manual/query.html#usage" data-ice="link">Usage</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#importing--code-query--code--function-from--dikotech-basic" data-ice="link">Importing query function from @dikotech/basic</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#simple-query" data-ice="link">Simple Query</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#select-extract-json-data" data-ice="link">Select/Extract JSON data</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#simple-extract-data" data-ice="link">Simple Extract data</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#extract-and-compose" data-ice="link">Extract and Compose</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#manipulate-json-data" data-ice="link">Manipulate JSON data</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#set-value" data-ice="link">Set value</a></li>
<li data-ice="manualNav" class="indent-h4" data-link="manual/query.html"><a href="manual/query.html#unset-value" data-ice="link">Unset value</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/query.html"><a href="manual/query.html#query-language" data-ice="link">Query Language</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#lexical-structure" data-ice="link">Lexical Structure</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#references" data-ice="link">References</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#scalar-and-literals" data-ice="link">Scalar and Literals</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#list" data-ice="link">List</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#object" data-ice="link">Object</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#variables" data-ice="link">Variables</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#arithmetic" data-ice="link">Arithmetic</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#conditional" data-ice="link">Conditional</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#assignment" data-ice="link">Assignment</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/query.html"><a href="manual/query.html#object-query" data-ice="link">Object Query</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown">
  <div class="manual-user-index" data-ice="manualUserIndex"><h1 id="-dikotech-basic">@dikotech/basic</h1></div>

  

  <div class="manual-cards">
    
  <div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>@dikotech/basic</h1></div>
        <a data-ice="link" href="manual/README.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>JSON Query</h1><h2>Usage</h2><h3>Importing <code>query</code> function from @dikotech/basic</h3><p>CommonJS</p><pre><code class="lang-js"><code class="source-code prettyprint">const query = require(&quot;@dikotech/basic&quot;).query;</code>
</code></pre><p>ECMAScript module</p><pre><code class="lang-js"><code class="source-code prettyprint">import { query } from &quot;@dikotech/basic&quot;;</code>
</code></pre><h3>Simple Query</h3><pre><code class="lang-js"><code class="source-code prettyprint">// returns 9
query(
  &quot;(1 + 2) * 3&quot;
);

// returns false
query(
  &quot;5 &gt; 6&quot;
);

// returns true
query(
  &quot;5 &lt;= 6&quot;
);</code>
</code></pre><h3>Select/Extract JSON data</h3><p><strong>With sample JSON</strong></p><pre><code class="lang-json"><code class="source-code prettyprint">{
  &quot;message&quot;: &quot;Ok&quot;,
  &quot;data&quot;: [
    {
      &quot;id&quot;: 1,
      &quot;name&quot;: &quot;name1&quot;,
      &quot;language&quot;: [
        &quot;en&quot;,
        &quot;fr&quot;,
        1,
        &quot;de&quot;
      ]
    },
    {
      &quot;id&quot;: 2,
      &quot;name&quot;: &quot;name2&quot;
    }
  ]
}</code>
</code></pre><h4>Simple Extract data</h4><pre><code class="lang-js"><code class="source-code prettyprint">// returns 1
query(
  &quot;data[0].id&quot;,
  object
);</code>
</code></pre><h4>Extract and Compose</h4><p><strong>Composing array/list</strong></p><pre><code class="lang-js"><code class="source-code prettyprint">// returns [ &quot;en&quot;, &quot;fr&quot;, &quot;de&quot; ]
query(
  `
  (
    data[0].language[0],
    data[0].language[1],
    data[0].language[3]
  )
  `,
  object
);</code>
</code></pre><p><strong>Composing object</strong></p><pre><code class="lang-js"><code class="source-code prettyprint">//  returns { &quot;found&quot;: 1, &quot;nextName&quot;: &quot;name1&quot; }
query(
  `
  (
    data[0].id as found,
    data[1].name as nextName
  )
  `,
  object
);</code>
</code></pre><h3>Manipulate JSON data</h3><p><strong>With sample JSON</strong></p><pre><code class="lang-json"><code class="source-code prettyprint">{
  &quot;message&quot;: &quot;Ok&quot;,
  &quot;data&quot;: [
    {
      &quot;id&quot;: 1,
      &quot;name&quot;: &quot;name1&quot;,
      &quot;language&quot;: [
        &quot;en&quot;,
        &quot;fr&quot;
      ]
    },
    {
      &quot;id&quot;: 2,
      &quot;name&quot;: &quot;name2&quot;
    }
  ]
}</code>
</code></pre><h4>Set value</h4><p><strong>Simple set value</strong></p><pre><code class="lang-js"><code class="source-code prettyprint">// data[0] will now contain { id: 42, name: &quot;name1&quot;, language: [&quot;en&quot;, &quot;fr&quot;]}
// then, returns 42
query(
  &quot;data[0].id is 42&quot;,
  object
);</code>
</code></pre><p><strong>Multiple set value</strong></p><pre><code class="lang-js"><code class="source-code prettyprint">// data[0] will now contain { id: 42, name: &quot;name1&quot;, language: [&quot;en&quot;, &quot;fr&quot;]}
// data[1] will now contain { id: 2, name: &quot;updated name&quot;, language: [&quot;en&quot;]}
// then, returns [42, &quot;updated name&quot;, &quot;en&quot; ]
query(
  `
  (
    data[0].id is ?,
    data[1].name is ?,
    data[1].language[] is ?
  )
  `,
  object,
  [
    42,
    &quot;updated name&quot;,
    &quot;en&quot;
  ]
);

// data[0] will now contain { id: 42, name: &quot;name1&quot;, language: [&quot;en&quot;, &quot;fr&quot;]}
// data[1] will now contain { id: 2, name: &quot;updated name&quot;, language: [&quot;en&quot;]}
// then, returns { &quot;updatedId&quot;: 42, &quot;updatedName&quot;: &quot;updated name&quot;, &quot;updatedLanguage&quot;: &quot;en&quot; }
query(
  `
  (
    data[0].id is ? as updatedId,
    data[1].name is ? as updatedName,
    data[1].language[] is ? as updatedLanguage
  )
  `,
  object,
  [
    42,
    &quot;updated name&quot;,
    &quot;en&quot;
  ]
);

// creates new item in &quot;data&quot; array indexed by &quot;2&quot;.
// data[2] will now contain { id: 42, name: &quot;name1&quot;, language: [&quot;en&quot;]}
// then, returns { &quot;updatedId&quot;: 42, &quot;updatedName&quot;: &quot;updated name&quot;, &quot;updatedLanguage&quot;: &quot;en&quot; }
query(
  `
  (
    data[2].id is ? as updatedId,
    data[2].name is ? as updatedName,
    data[2].language[] is ? as updatedLanguage
  )
  `,
  object,
  [
    42,
    &quot;updated name&quot;,
    &quot;en&quot;
  ]
);</code>
</code></pre><h4>Unset value</h4><p><strong>Simple remove property</strong></p><pre><code class="lang-js"><code class="source-code prettyprint">
// removes &quot;message&quot; property.
// returns last value &quot;Ok&quot;.
query(
  &quot;! message&quot;,
  object
);

// removes &quot;message&quot; property.
//  then, removes &quot;name&quot; property in data[0].
//  then, removes &quot;language&quot; property in data[0].
//  then, pops &quot;0&quot; index in data[0].language array.
// returns old values [ &quot;Ok&quot;, &quot;name1&quot;, &quot;en&quot; ].
query(
  `
  (
    ! message,
    data[0] ! name,
    data[0] ! language ! 0
  )
  `,
  object
);</code>
</code></pre><h2>Query Language</h2><p>Supported Lexical Structures.</p><h3>Lexical Structure</h3><pre><code><code class="source-code prettyprint">#####################################
# Reference declarations (optional)
#####################################

[`identifier` from `expression`;]
  ...
  [`identifier` from `expression`;]


#####################################
# Main expression (required)
#####################################

`expression` [as `identifier`] [is `expression`]
    ...
    , `expression` [as `identifier`] [is `expression`]

</code>
</code></pre><h3>References</h3><p><strong>Using references</strong></p><pre><code><code class="source-code prettyprint">// reference declaration

myReference from data[1].value;

// using reference with @

@myReference.length</code>
</code></pre><h3>Scalar and Literals</h3><p>Scalars are literally declared as seen in the examples.</p><table>
<thead>
<tr>
<th>Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Integer</td>
<td><code>10</code><br><br><code>-2</code><br><br><code>+500</code></td>
<td>Whole number.</td>
</tr>
<tr>
<td>Float</td>
<td><code>.5</code><br><br><code>1.5</code><br><br><code>-0.1</code></td>
<td>Number with precision</td>
</tr>
<tr>
<td>Percent</td>
<td><code>-1%</code><br><br><code>210%</code></td>
<td>Float multiplied by .01</td>
</tr>
<tr>
<td>String</td>
<td><code>&quot;double quote&quot;</code><br><br><code>&apos;single quote&apos;</code><br><br><code>&apos;\n escaped next line&apos;</code></td>
<td>Enclosed in double quote and single quote</td>
</tr>
</tbody>
</table><h3>List</h3><p>Lists are internally Javascript Array instance.</p><p>It can be composed using parenthesis <code>(1, 2, &quot;last item&quot;)</code>.</p><table>
<thead>
<tr>
<th>Result Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Array</td>
<td><code>(1,2,3)</code><br><br><code>(</code><br>&#xA0;&#xA0;&#xA0;&#xA0;<code>&quot;diko&quot;,</code><br>&#xA0;&#xA0;&#xA0;&#xA0;<code>3,</code><br>&#xA0;&#xA0;&#xA0;&#xA0;<code>@myValue</code><br><code>)</code></td>
<td>Zero-based indexed list of values where first item index is 0, and nth for next consecutive items.</td>
</tr>
</tbody>
</table><h3>Object</h3><p>Objects are internally Javascript Object instance.</p><p>It can be composed using parenthesis with properties defined using <code>as</code> operator <code>(1 as first, 2 as seconds, &quot;last item&quot; as last)</code>.</p><table>
<thead>
<tr>
<th>Result Type</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Object</td>
<td>(1 <strong>as</strong> first, 2 <strong>as</strong> second, 3 <strong>as</strong> third)<br><br>(<br>&#xA0;&#xA0;&#xA0;&#xA0;&quot;diko&quot; <strong>as</strong> name,<br>&#xA0;&#xA0;&#xA0;&#xA0;3 <strong>as</strong> count,<br>&#xA0;&#xA0;&#xA0;&#xA0;@myValue <strong>as</strong> value<br>)</td>
<td>Struct data containing properties defined using <strong>as</strong> operator and <strong>identifier</strong> as property name.</td>
</tr>
</tbody>
</table><h3>Variables</h3><table>
<thead>
<tr>
<th>Result Type</th>
<th>Operator</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mixed</td>
<td><strong><code>?</code></strong></td>
<td>data[<strong>?</strong>]<br><br>data[0].id = <strong>?</strong></td>
<td>Question mark <strong>?</strong> contains any value defined outside the query.<br>Value in <strong>?</strong> contains value listed in <strong>variables</strong> Array argument when calling <code>query(myquery, targetobject,</code><strong>variables</strong><code>)</code> function in order they appear in the query code.<br><br>For example, the first question mark will contain <strong>&quot;my value&quot;</strong> string if function is executed like this <code>query(&quot;data.?&quot;, target, [</code><strong>&quot;my value&quot;</strong><code>, 1])</code></td>
</tr>
<tr>
<td>Mixed</td>
<td><strong><code>@</code></strong></td>
<td>myReference <em>from</em> data[1];<br>value <em>from</em> <strong>@myReference</strong>.value;<br><br><strong>@myReference</strong>.name as name,<br>1 + <strong>@value</strong> as value</td>
<td>Uses the value referenced from <strong>from</strong> declaration.</td>
</tr>
</tbody>
</table><h3>Arithmetic</h3><table>
<thead>
<tr>
<th>Result Type</th>
<th>Operator</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Number or,<br>String</td>
<td><strong><code>+</code></strong></td>
<td>1 <strong><code>+</code></strong> 2</td>
<td>Addition.<br>But, result may be a <strong>concatenated string</strong> if one or all of the operands is a <strong>string</strong>.</td>
</tr>
<tr>
<td>Number</td>
<td><strong><code>-</code></strong></td>
<td>1 <strong><code>-</code></strong> 2</td>
<td>Subtraction.</td>
</tr>
<tr>
<td>Number</td>
<td><strong><code>*</code></strong></td>
<td>1 <strong><code>*</code></strong> 2</td>
<td>Multiplication.</td>
</tr>
<tr>
<td>Number</td>
<td><strong><code>/</code></strong></td>
<td>1 <strong><code>/</code></strong> 2</td>
<td>Division.</td>
</tr>
<tr>
<td>Number</td>
<td><strong><code>%</code></strong></td>
<td>1 <strong><code>%</code></strong> 2</td>
<td>Modulo Division. Resturns remainder of division operation</td>
</tr>
</tbody>
</table><h3>Conditional</h3><table>
<thead>
<tr>
<th>Result Type</th>
<th>Operator</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Boolean</td>
<td><strong><code>=</code></strong></td>
<td>1 <strong><code>=</code></strong> 2</td>
<td>Modulo Division.</td>
</tr>
<tr>
<td>Boolean</td>
<td><strong><code>&gt;</code></strong></td>
<td>1 <strong><code>&gt;</code></strong> 2</td>
<td>Addition.</td>
</tr>
<tr>
<td>Boolean</td>
<td><strong><code>&gt;=</code></strong></td>
<td>1 <strong><code>&gt;=</code></strong> 2</td>
<td>Subtraction.</td>
</tr>
<tr>
<td>Boolean</td>
<td><strong><code>&lt;</code></strong></td>
<td>1 <strong><code>&lt;</code></strong> 2</td>
<td>Multiplication.</td>
</tr>
<tr>
<td>Boolean</td>
<td><strong><code>&lt;=</code></strong></td>
<td>1 <strong><code>&lt;=</code></strong> 2</td>
<td>Division.</td>
</tr>
</tbody>
</table><h3>Assignment</h3><table>
<thead>
<tr>
<th>Result Type</th>
<th>Operator</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mixed</td>
<td><strong><code>is</code></strong></td>
<td>data[0] <strong><code>is</code></strong> &quot;value&quot;</td>
<td>Assigns <strong>&quot;value&quot;</strong> to <strong>data[0]</strong> expression.</td>
</tr>
</tbody>
</table><h3>Object Query</h3><table>
<thead>
<tr>
<th>Result Type</th>
<th>Operator</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mixed</td>
<td><strong><code>.</code></strong></td>
<td>data <strong><code>.</code></strong> propertyName<br>data <strong><code>.</code></strong> &quot;propertyName&quot; <strong><code>.</code></strong> target = ?</td>
<td><strong>Extract mode:</strong><br>Retrieves property of Object.<br><br><strong>Assign mode:</strong><br>Assign/Populate property value of the Object.</td>
</tr>
<tr>
<td>Mixed</td>
<td><strong><code>[]</code></strong></td>
<td>data <strong><code>[1]</code></strong><br><br>data <strong><code>[propertyName]</code></strong> = ?<br><br>data <strong><code>[1..10, 20]</code></strong><br><br>data <strong><code>[]</code></strong> is ?</td>
<td><strong>Extract mode:</strong><br>Retrieves property of an object or item of an Array list if there is only one value or identifier inside <strong><code>[]</code></strong>.<br><br>It can also act as object property or list index filter if <strong><code>[]</code></strong> contains none (e.g. <strong><code>[]</code></strong>), or two or more values (e.g. <strong><code>[1, 5, name]</code></strong>), or number range (e.g. <strong><code>[10..25]</code></strong>).<br>The result of list index or object property filter with <strong><code>[]</code></strong> operator end up as list array.<br><br><strong>Assign mode:</strong><br>Assign/populate list item or object property value. May also do multiple assignment of values when <strong><code>[]</code></strong> operator results in object property or list index filter.</td>
</tr>
<tr>
<td>Mixed</td>
<td><strong><code>as</code></strong></td>
<td>data[0] <strong>as</strong> propertyName</td>
<td></td>
</tr>
</tbody>
</table></div>
        <a data-ice="link" href="manual/query.html"></a>
      </div>
    </div>
</div>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
