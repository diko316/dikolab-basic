{
  "root": "Query",
  "grammar": {
    "Query": [
      ["Expr", "$"],
      ["Vars", ";", "Expr", "$"]
    ],

    "Vars": [
      ["Vars", ";", "Var"],
      ["Var"]
    ],

    "Var": [
      ["ident", "from", "Path"]
    ],

    "Expr": [
      ["Logical"],
      ["Cond"],
      ["Assign"],
      ["Unset"]
    ],

    "Assign": [
      ["Path", "=", "Assignable"]
    ],

    "Assignable": [
      ["Assign"],
      ["Logical"],
      ["Cond"]
    ],

    "Cond": [
      ["TernCond", "Assignable", ":", "Assignable"]
    ],

    "TernCond": [
      ["Logical", "?"]
    ],

    "Unset": [
      ["delete", "Path"]
    ],

    "Logical": [
      ["Or"],
      ["And"],
      ["Comparable"]
    ],

    "Or": [
      ["Logical", "||", "Comparable"]
    ],

    "And": [
      ["Logical", "&&", "Comparable"]
    ],

    "Comparable": [
      ["Compound"],
      ["Match"],
      ["Eq"],
      ["Neq"],
      ["SNeq"],
      ["Seq"],
      ["Gt"],
      ["Gte"],
      ["Lt"],
      ["Lte"]
    ],

    "Match": [
      ["Scalar", "=~", "MatchOp"]
    ],

    "MatchOp": [
      ["string"],
      ["regex"]
    ],

    "Seq": [
      ["Compound", "===", "Compound"]
    ],

    "Eq": [
      ["Compound", "==", "Compound"]
    ],

    "Neq": [
      ["Compound", "!=", "Compound"]
    ],

    "SNeq": [
      ["Compound", "!==", "Compound"]
    ],

    "Compound": [
      ["Scalar"],
      ["Object"],
      ["Array"],
      ["Boolean"],
      ["null"],
      ["Not"]
    ],

    "Boolean": [
      ["true"],
      ["false"]
    ],

    "Not": [
      ["!", "Compound"]
    ],

    "Array": [
      ["[", "Params", "]"]
    ],

    "Object": [
      ["{", "Props", "}"]
    ],

    "Props": [
      ["Props", ",", "Prop"],
      ["Prop"]
    ],

    "Prop": [
      ["ident", ":", "Assignable"]
    ],

    "Gt": [
      ["Scalar", ">", "Scalar"]
    ],

    "Gte": [
      ["Scalar", ">=", "Scalar"]
    ],

    "Lt": [
      ["Scalar", "<", "Scalar"]
    ],

    "Lte": [
      ["Scalar", "<=", "Scalar"]
    ],

    "Scalar": [
      ["Concat"],
      ["Term"],
      ["string"]
    ],

    "Concat": [
      ["Concat", "+", "Scalar"],
      ["string", "+", "string"],
      ["Term", "+", "string"],
      ["string", "+", "Term"]
    ],

    "Term": [
      ["Add"],
      ["Sub"],
      ["Factor"]
    ],

    "Add": [
      ["Term", "+", "Factor"]
    ],

    "Sub": [
      ["Term", "-", "Factor"]
    ],

    "Factor": [
      ["Mul"],
      ["Div"],
      ["Mod"],
      ["Variant"],
      ["Numeric"]
    ],

    "Mul": [
      ["Factor", "*", "FactorOp"]
    ],

    "Div": [
      ["Factor", "/", "FactorOp"]
    ],

    "Mod": [
      ["Factor", "%", "FactorOp"]
    ],

    "FactorOp": [
      ["Variant"],
      ["Numeric"]
    ],

    "Variant": [
      ["Path"],
      ["Call"],
      ["InExpr"]
    ],

    "Call": [
      ["ident", "(", "Params", ")"]
    ],

    "InExpr": [
      ["(", "Assignable", ")"]
    ],

    "Params": [
      ["Params", ",", "Assignable"],
      ["Assignable"]
    ],

    "Numeric": [
      ["Positive"],
      ["Negative"],
      ["Num"]
    ],

    "Positive": [
      ["+", "Num"]
    ],

    "Negative": [
      ["-", "Num"]
    ],

    "Num": [
      ["integer"],
      ["float"],
      ["percent"]
    ],

    "Path": [
      ["PathAccess"],
      ["DotRoot"]
    ],
    "PathAccess": [
      ["DotKeyAccess"],
      ["DotAccess"],
      ["BraceAccess"],
      ["BraceKeyAccess"],
      ["PathRoot"]
    ],
    "DotKeyAccess": [
      ["PathAccess", "DotKey"]
    ],
    "DotAccess": [
      ["PathAccess", "DotFilter"]
    ],
    "BraceAccess": [
      ["PathAccess", "BraceFilter"]
    ],
    "BraceKeyAccess": [
      ["PathAccess", "BraceKey"]
    ],
    "PathRoot": [
      ["DotKey"],
      ["DotFilter"],
      ["DotRoot", "BraceFilter"],
      ["DotRoot", "BraceKey"],
      ["ident"],
      ["Ref"],
      ["Root"],
      ["RefIndex"],
      ["InExpr", "RootKey"],
      ["InExpr", "RootFilter"]
    ],

    "RootKey": [
      ["DotKey"],
      ["BraceKey"]
    ],
    "RootFilter": [
      ["DotFilter"],
      ["BraceFilter"]
    ],

    "DotKey": [
      [".", "Key"]
    ],

    "DotFilter": [
      [".", "*"]
    ],

    "BraceFilter": [
      ["[", "]"],
      ["[", "*", "]"],
      ["[", "KeyFilter", "]"]
    ],

    "BraceKey": [
      ["[", "Key", "]"]
    ],

    "Key": [
      ["ident"],
      ["string"],
      ["RangeUnit"]
    ],

    "KeyFilter": [
      ["KeyFilter", ",", "RangeOp"],
      ["RangeUnit", ",", "RangeOp"],
      ["Range"]
    ],

    "RangeOp": [
      ["RangeUnit"],
      ["Range"]
    ],

    "Range": [
      ["RangeUnit", "..", "RangeUnit"]
    ],

    "RangeUnit": [
      ["integer"],
      ["RefIndex"],
      ["InExpr"]
    ],

    "DotRoot": [
      ["."]
    ],
    "Ref": [
      ["@", "ident"]
    ],
    "Root": [
      ["@"]
    ],
    "RefIndex": [
      ["@", "integer"],
      ["?"]
    ]
  }
}