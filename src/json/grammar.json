{
  "root": "Query",
  "grammar": {
    "Query": [
      ["Expr", "$"],
      ["Vars", ";", "Expr", "$"]
    ],

    "Vars": [
      ["Vars", ";", "Var"],
      ["Var"]
    ],

    "Var": [
      ["ident", "from", "Path"]
    ],

    "Expr": [
      ["Logical"],
      ["Cond"],
      ["Assign"],
      ["Unset"]
    ],

    "Assign": [
      ["Path", "=", "Assignable"]
    ],

    "Assignable": [
      ["Assign"],
      ["Logical"],
      ["Cond"]
    ],

    "Cond": [
      ["Logical", "?", "Assignable", ":", "Assignable"]
    ],

    "Unset": [
      ["delete", "Path"]
    ],

    "Logical": [
      ["Or"],
      ["And"],
      ["Comparable"]
    ],

    "Or": [
      ["Logical", "||", "Comparable"]
    ],

    "And": [
      ["Logical", "&&", "Comparable"]
    ],

    "Comparable": [
      ["Compound"],
      ["Match"],
      ["Eq"],
      ["Neq"],
      ["SNeq"],
      ["Seq"],
      ["Gt"],
      ["Gte"],
      ["Lt"],
      ["Lte"]
    ],

    "Match": [
      ["Scalar", "=~", "MatchOp"]
    ],

    "MatchOp": [
      ["string"],
      ["regex"]
    ],

    "Seq": [
      ["Compound", "===", "Compound"]
    ],

    "Eq": [
      ["Compound", "==", "Compound"]
    ],

    "Neq": [
      ["Compound", "!=", "Compound"]
    ],

    "SNeq": [
      ["Compound", "!==", "Compound"]
    ],

    "Compound": [
      ["Scalar"],
      ["Object"],
      ["Array"],
      ["Boolean"],
      ["null"],
      ["Not"]
    ],

    "Boolean": [
      ["true"],
      ["false"]
    ],

    "Not": [
      ["!", "Compound"]
    ],

    "Array": [
      ["[", "Params", "]"]
    ],

    "Object": [
      ["{", "Props", "}"]
    ],

    "Props": [
      ["Props", ",", "Prop"],
      ["Prop"]
    ],

    "Prop": [
      ["ident", ":", "Assignable"]
    ],

    "Gt": [
      ["Scalar", ">", "Scalar"]
    ],

    "Gte": [
      ["Scalar", ">=", "Scalar"]
    ],

    "Lt": [
      ["Scalar", "<", "Scalar"]
    ],

    "Lte": [
      ["Scalar", "<=", "Scalar"]
    ],

    "Scalar": [
      ["Concat"],
      ["Term"],
      ["string"]
    ],

    "Concat": [
      ["Concat", "+", "Scalar"],
      ["string", "+", "string"],
      ["Term", "+", "string"],
      ["string", "+", "Term"]
    ],

    "Term": [
      ["Add"],
      ["Sub"],
      ["Factor"]
    ],

    "Add": [
      ["Term", "+", "Factor"]
    ],

    "Sub": [
      ["Term", "-", "Factor"]
    ],

    "Factor": [
      ["Mul"],
      ["Div"],
      ["Mod"],
      ["Variant"],
      ["Numeric"]
    ],

    "Mul": [
      ["Factor", "*", "FactorOp"]
    ],

    "Div": [
      ["Factor", "/", "FactorOp"]
    ],

    "Mod": [
      ["Factor", "%", "FactorOp"]
    ],

    "FactorOp": [
      ["Variant"],
      ["Numeric"]
    ],

    "Variant": [
      ["Path"],
      ["RefIndex"],
      ["Call"],
      ["InExpr"]
    ],

    "Call": [
      ["ident", "(", "Params", ")"]
    ],

    "Params": [
      ["Params", ",", "Assignable"],
      ["Assignable"]
    ],

    "Numeric": [
      ["PosNum"],
      ["NegNum"],
      ["Num"]
    ],

    "PosNum": [
      ["+", "Num"]
    ],

    "NegNum": [
      ["-", "Num"]
    ],

    "Num": [
      ["integer"],
      ["float"],
      ["percent"]
    ],

    "Path": [
      ["Dot"],
      ["Brace"],
      ["Filter"],
      ["Ref"],
      ["Root"],
      ["ident"]
    ],
    "Dot": [
      ["PreDot", "PostDot"],
      ["PreDot", "integer"]
    ],
    "Brace": [
      ["PreBrace", "PostDot", "]"],
      ["PreBrace", "integer", "]"]
    ],
    "Filter": [
      ["PreBrace", "]"],
      ["PreBrace", "Ranges", "]"]
    ],
    "PreDot": [
      ["Path", "."],
      ["."]
    ],
    "PreBrace": [
      ["Path", "["],
      [".", "["]
    ],
    "PostDot": [
      ["ident"],
      ["string"],
      ["RefIndex"],
      ["RecExpr"]
    ],
    "Ranges": [
      ["Ranges", ",", "RangeOp"],
      ["Ranges", ",", "Range"],
      ["RangeOp"],
      ["Range"]
    ],
    "Range": [
      ["RangeOp", "..", "RangeOp"]
    ],

    "RangeOp": [
      ["integer"],
      ["RefIndex"],
      ["RecExpr"]
    ],

    "RecExpr": [
      ["(", "Expr", ")"]
    ],

    "Ref": [
      ["@", "ident"]
    ],
    "Root": [
      ["@"]
    ],
    "RefIndex": [
      ["@", "integer"],
      ["?"]
    ]
  }
}